<ion-content [fullscreen]="true" class="ion-padding">
  <form [formGroup]="datosForm" (ngSubmit)="login()" novalidate>

    <ion-grid fixed>
      <ion-row class="ion-justify-content-center">
        <ion-col size="12" sizeSm="8" sizeMd="6" sizeLg="4">

          <ion-card>
            <ion-card-header>
              <ion-card-title class="ion-text-center">Iniciar sesión</ion-card-title>
              <ion-card-subtitle class="ion-text-center">Ingresa tus credenciales</ion-card-subtitle>
            </ion-card-header>

            <ion-card-content>

              <!-- Email -->
              <ion-item lines="inset">
                <ion-label position="stacked">Correo electrónico</ion-label>
                <ion-input
                  type="email"
                  inputmode="email"
                  placeholder="tu@correo.com"
                  formControlName="email"
                  autocomplete="email"
                  />
              </ion-item>
              <ion-note color="danger" *ngIf="datosForm.get('email')?.touched && datosForm.get('email')?.hasError('required')">
                El correo es obligatorio.
              </ion-note>
              <ion-note color="danger" *ngIf="datosForm.get('email')?.touched && datosForm.get('email')?.hasError('email')">
                Formato de correo inválido.
              </ion-note>

              <!-- Password -->
              <ion-item lines="inset" class="ion-margin-top">
                <ion-label position="stacked">Contraseña</ion-label>
                <ion-input
                  [type]="verPass ? 'text' : 'password'"
                  placeholder="Mínimo 6 caracteres"
                  formControlName="password"
                  autocomplete="current-password"
                  />
                <ion-buttons slot="end">
                  <ion-button fill="clear" type="button" (click)="verPass = !verPass" [attr.aria-pressed]="verPass">
                    <ion-icon [name]="verPass ? 'eye-off-outline' : 'eye-outline'"></ion-icon>
                  </ion-button>
                </ion-buttons>
              </ion-item>
              <ion-note color="danger" *ngIf="datosForm.get('password')?.touched && datosForm.get('password')?.hasError('required')">
                La contraseña es obligatoria.
              </ion-note>
              <ion-note color="danger" *ngIf="datosForm.get('password')?.touched && datosForm.get('password')?.hasError('minlength')">
                Debe tener al menos 6 caracteres.
              </ion-note>

              <!-- Actions -->
              <div class="ion-text-center ion-margin-top">
                <ion-button
                  type="submit"
                  expand="block"
                  [disabled]="datosForm.invalid || cargando">
                  <ion-spinner *ngIf="cargando" name="crescent" class="ion-margin-end"></ion-spinner>
                  Entrar
                </ion-button>

                <ion-button
                  type="button"
                  fill="clear"
                  (click)="irARegistro()"
                  [disabled]="cargando">
                  ¿No tienes cuenta? Regístrate
                </ion-button>
              </div>

            </ion-card-content>
          </ion-card>

        </ion-col>
      </ion-row>
    </ion-grid>

  </form>
</ion-content>
